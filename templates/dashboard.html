<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Panel · SleepCoach.AI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"/>
  <link rel="stylesheet" href="/static/css/chat.css"/>
  <style>
    :root{
      --ring: rgba(108,99,255,.28);
      --muted:#6b7280;
    }
    body{ margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial; color:#1f2937; }
    .container{ max-width:1150px; margin:0 auto; padding:0 20px; }

    /* üst bar (mevcut tasarımla uyumlu) */
    .nav{ position:sticky; top:0; z-index:1000; background:rgba(255,255,255,.92);
      backdrop-filter:saturate(180%) blur(10px); border-bottom:1px solid rgba(0,0,0,.06);
      box-shadow:0 6px 22px rgba(17,24,39,.06);
    }
    .nav-inner{ display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:14px; padding:16px 0; }
    .brand{ font-weight:900; font-size:20px; letter-spacing:-.02em; }
    .actions{ justify-self:end; display:flex; gap:10px; align-items:center }

    /* dropdown (seninle aynı sınıf isimleri) */
    #user-slot.user-slot{ position:relative; display:inline-block; isolation:isolate; }
    #user-slot .user-menu{
      position:absolute; right:0; top:calc(100% + 8px);
      min-width:240px; padding:8px; background:#fff; border:1px solid #ececff; border-radius:14px;
      box-shadow:0 16px 36px rgba(38,25,120,.14); display:none; z-index:10000; max-height:min(60vh,420px); overflow:auto;
    }
    #user-slot.user-slot.open > .user-menu{ display:block; animation:down .18s ease-out; transform-origin:top; }
    #user-slot .user-menu::before{
      content:""; position:absolute; top:-8px; right:20px; width:14px; height:14px; background:#fff;
      border-left:1px solid #ececff; border-top:1px solid #ececff; transform:rotate(45deg);
    }
    @keyframes down{ from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:translateY(0)} }
    #user-slot .user-chip{
      display:inline-flex; align-items:center; gap:8px; height:40px; padding:0 12px; border-radius:12px;
      background:#fff; border:1px solid #e9e9ff; cursor:pointer; box-shadow:0 6px 18px rgba(38,25,120,.08);
      font-weight:600; color:#26224a;
    }
    #user-slot .user-chip .avatar{
      width:26px; height:26px; border-radius:999px; display:grid; place-items:center;
      background:linear-gradient(135deg,#7f6dff,#a78bfa); color:#fff; font-size:12px; font-weight:700;
    }

    /* PANEl içerik */
    .dash-hero{ padding:28px 0 10px; }
    .dash-hero h1{ margin:0 0 6px; font-size:28px; letter-spacing:-.01em; }
    .muted{ color: var(--muted); }

    .grid{ display:grid; gap:18px; }
    .grid-3{ grid-template-columns:2fr 1fr; }
    @media (max-width:1000px){ .grid-3{ grid-template-columns:1fr; } }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.62));
      border:1px solid rgba(0,0,0,.06); border-radius:16px; padding:16px;
      box-shadow:0 10px 30px rgba(10,16,34,.08);
    }
    .card h3{ margin:0 0 10px; font-size:18px; }

    .stats{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
    @media (max-width:700px){ .stats{ grid-template-columns:1fr; } }
    .stat{
      background:#fff; border:1px solid #eef; border-radius:14px; padding:14px;
      box-shadow:0 8px 20px rgba(10,16,34,.06);
    }
    .stat .k{ font-size:13px; color:var(--muted) }
    .stat .v{ font-size:22px; font-weight:800 }

    /* listeler */
    .list{ display:grid; gap:10px; }
    .row{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      background:#fff; border:1px solid #eef; border-radius:12px; padding:10px 12px;
    }
    .row .title{ font-weight:600 }
    .row .meta{ font-size:13px; color:var(--muted) }

    /* skeleton */
    .skeleton{ position:relative; overflow:hidden; background:#f6f7fb; border-radius:10px; }
    .skeleton::after{
      content:""; position:absolute; inset:0; transform:translateX(-100%);
      background:linear-gradient(90deg, transparent, rgba(255,255,255,.65), transparent);
      animation:shimmer 1.2s infinite;
    }
    @keyframes shimmer{ 100%{ transform:translateX(100%); } }
    .s-line{ height:14px; border-radius:6px; }
    .s-lg{ height:22px; border-radius:8px; }

    .btn{ display:inline-flex; align-items:center; gap:8px; height:40px; padding:0 14px; border-radius:12px; border:1px solid #e9e9ff; background:#fff; font-weight:600; cursor:pointer; }
    .btn-ghost{ background:transparent; }
  </style>
</head>
<body>
  <!-- NAV -->
  <nav class="nav" aria-label="Ana gezinme">
    <div class="container nav-inner">
      <a class="brand" href="/">SleepCoach.<span style="background:linear-gradient(90deg,#22d3ee,#a78bfa);-webkit-background-clip:text;background-clip:text;color:transparent">AI</span></a>
      <div></div>
      <div class="actions">
        <a class="btn btn-ghost" href="/assessment">Değerlendirme</a>
        <div id="user-slot" class="user-slot">
          <a class="btn" href="/login">Giriş Yap</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- PANEL -->
  <main class="container">
    <section class="dash-hero">
      <h1 id="hello">Panel</h1>
      <div class="muted" id="helloSub">Hesap özeti ve son aktiviteleriniz.</div>
    </section>

    <section class="grid grid-3" aria-live="polite">
      <!-- sol: profil + listeler -->
      <div class="grid" style="gap:18px">
        <!-- Profil kartı -->
        <article class="card" id="cardProfile">
          <h3>Profil</h3>
          <div style="display:flex; align-items:center; gap:12px">
            <div id="profAvatar" class="skeleton" style="width:48px; height:48px; border-radius:999px"></div>
            <div style="flex:1">
              <div id="profName" class="skeleton s-lg" style="width:60%"></div>
              <div id="profEmail" class="skeleton s-line" style="width:40%; margin-top:8px"></div>
            </div>
            <a class="btn" href="/dashboard#profile">Profili Düzenle</a>
          </div>
        </article>

        <!-- Son Değerlendirmeler -->
        <article class="card" id="cardAssess">
          <h3>Son Değerlendirmeler</h3>
          <div class="list" id="assessList">
            <div class="row skeleton"><div class="s-line" style="width:70%"></div></div>
            <div class="row skeleton"><div class="s-line" style="width:55%"></div></div>
            <div class="row skeleton"><div class="s-line" style="width:65%"></div></div>
          </div>
          <div style="margin-top:10px">
            <a class="btn" href="/dashboard#assessments">Tümünü Gör</a>
          </div>
        </article>

        <!-- Alarmlar -->
        <article class="card" id="cardAlarms">
          <h3>Aktif Alarmlar</h3>
          <div class="list" id="alarmList">
            <div class="row skeleton"><div class="s-line" style="width:60%"></div></div>
            <div class="row skeleton"><div class="s-line" style="width:40%"></div></div>
          </div>
          <div style="margin-top:10px">
            <a class="btn" href="/dashboard#alarms">Alarm Yönetimi</a>
          </div>
        </article>
      </div>

      <!-- sağ: istatistikler -->
      <aside class="card">
        <h3>Özet</h3>
        <div class="stats">
          <div class="stat"><div class="k">Toplam Değerlendirme</div><div class="v" id="stAssess">—</div></div>
          <div class="stat"><div class="k">Aktif Alarm</div><div class="v" id="stAlarms">—</div></div>
          <div class="stat"><div class="k">Üyelik</div><div class="v" id="stMember">—</div></div>
        </div>
      </aside>
    </section>
  </main>

  <!-- scriptler -->
  <script src="/static/js/user-menu.js"></script>
  <script src="/static/js/dashboard.js"></script>
</body>
</html>
